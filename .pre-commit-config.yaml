# Pre-commit: format (ruff), lint (ruff check --fix), type-check (ty), commit message (Conventional Commits)
# Install: uv run pre-commit install && uv run pre-commit install --hook-type commit-msg
# Run manually: uv run pre-commit run --all-files

repos:
  # 1. Ruff: check (with auto-fix) then format; uses project pyproject.toml config
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.15.2
    hooks:
      - id: ruff-check
        args: [--fix]
      - id: ruff-format

  # 2. ty: type checker (uses project venv so deps are resolved; respects [tool.ty.src] in pyproject.toml)
  - repo: local
    hooks:
      - id: ty
        name: ty
        entry: uv run ty check app/
        language: system
        pass_filenames: false

  # 3. Commitizen: validate commit message (Conventional Commits); requires: pre-commit install --hook-type commit-msg
  - repo: https://github.com/commitizen-tools/commitizen
    rev: v4.13.8
    hooks:
      - id: commitizen
        stages: [commit-msg]
